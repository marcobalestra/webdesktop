"object"!=typeof glob&&(glob={}),"object"!=typeof glob.prop&&(glob.prop={}),glob.prop.select2_dopDownPosition="auto",$(document).on("click","button *:not([onclick])",ev=>{ev.preventDefault(),ev.stopPropagation(),$(ev.target).closest("button").trigger("click")}),String.prototype.escape||(glob.prop.cleanerdiv=$(document.createElement("div")),String.prototype.escape=function(){return glob.prop.cleanerdiv.text(this),glob.prop.cleanerdiv.html().replace(/"/g,"&#34;").replace(/'/g,"&#39;")}),String.prototype.normalizespace=function(){return String(this).replace(/\s+/g," ").trim()},Number.prototype.normalizespace=function(){return this.toString()},Array.prototype.forEachAwait||(Array.prototype.forEachAwait=async function(asyncfunc){for(let i=0;i<this.length;i++)await asyncfunc.call(window,this[i],i);return this}),Array.prototype.cisort=function(name){return name?this.sort((a,b)=>a[name].toLowerCase()>b[name].toLowerCase()?1:-1):this.sort((a,b)=>a.toLowerCase()>b.toLowerCase()?1:-1)},glob.clone=so=>{if(so){if(Array.isArray(so)){let o=[];return so.forEach(si=>o.push(glob.clone(si))),o}if("object"==typeof so){if("function"==typeof so.getTime)return so.getTime();let o={};return Object.keys(so).forEach(k=>o[k]=glob.clone(so[k])),o}}return so},glob.getCookies=()=>{let cobj={};return document.cookie.split(/\s*;\s*/).forEach(v=>{let kv=v.split(/\s*=\s*/);var n=kv.shift();"string"==typeof n&&""!=n&&(v=window.decodeURIComponent(kv[0]||""),cobj[n]=v)}),cobj},glob.getCookie=cn=>glob.getCookies()[cn],glob.setCookie=(n,v,o)=>{o="object"==typeof o?o:{};let s=n+"="+window.encodeURIComponent(v||"");if(o.path&&(s+=";path="+o.path),!0===o.domain&&(o.domain=window.location.hostname),o.firstLevel){let d=o.domain||window.location.hostname;d=d.replace(/^.*\.([^.]+)\.([^.]+)$/,"$1.$2"),!o.domain&&d==location.hostname||(o.domain=d)}return void 0!==o.sameSite&&(o.sameSite?s+=";SameSite=Strict":(s+=";SameSite=None",o.secure=!0)),o.secure&&(s+=";Secure"),"string"==typeof o.domain&&""!=o.domain&&(s+=";domain="+o.domain),o.maxAge&&(s+=";max-age="+o.maxAge),o.expires&&(o.expires instanceof Date&&(o.expires=o.expires.toUTCString()),s+=";expires="+o.expires),document.cookie=s,s},glob.rmCookie=(n,o)=>{if(void 0===glob.getCookie(n))return!1;(o="object"==typeof o?o:{}).expires="Thu, 01 Jan 1970 00:00:01 GMT",(o.sameSite=!0)===o.domain&&(o.domain=window.location.hostname),"string"==typeof o.domain&&""!=o.domain&&(o.domain=o.domain.replace(/^\./,""));var out=glob.setCookie(n,"",o);return o.domain||(o.domain=window.location.hostname),o.domain="."+o.domain,glob.setCookie(n,"",o),out},glob.uid=base=>(base||"")+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,c=>(c^crypto.getRandomValues(new Uint8Array(1))[0]&15>>c/4).toString(16)),glob.localize={def:"en",init:lang=>{if(!document||!document.documentElement)return setTimeout(()=>{glob.localize.init(lang)},10);lang&&"string"==typeof lang&&2<=lang.length?glob.localize.setLanguage(lang.replace(/^(..).*$/,"$1").toLowerCase()):(glob.getCookie("forcelang")||"").match(/^[a-z]{2}/i)?glob.localize.setLanguage(glob.getCookie("forcelang").replace(/^([a-z]{2}).*$/i,"$1").toLowerCase()):document.documentElement.getAttribute("lang")?glob.localize.setLanguage(document.documentElement.getAttribute("lang").replace(/^(..).*$/,"$1").toLowerCase()):document.documentElement.getAttribute("xml:lang")?glob.localize.setLanguage(document.documentElement.getAttribute("xml:lang").replace(/^(..).*$/,"$1").toLowerCase()):(glob.getCookie("language")||"").match(/^[a-z]{2}/i)?glob.localize.setLanguage(glob.getCookie("language").replace(/^([a-z]{2}).*$/i,"$1").toLowerCase()):(glob.getCookie("lang")||"").match(/^[a-z]{2}/i)?glob.localize.setLanguage(glob.getCookie("lang").replace(/^([a-z]{2}).*$/i,"$1").toLowerCase()):window.navigator.userLanguage||window.navigator.language?glob.localize.setLanguage((window.navigator.userLanguage||window.navigator.language).replace(/^(..).*$/,"$1").toLowerCase()):Array.isArray(window.navigator.languages)&&window.navigator.languages.length?glob.localize.setLanguage(window.navigator.languages[0].replace(/^(..).*$/,"$1").toLowerCase()):glob.localize.setLanguage(),setTimeout(glob.localize.page,1)},forceLang:l=>{glob.setCookie("forcelang",l,{path:"/",domain:!0,firstLevel:!0,sameSite:!0})},labelize:txt=>{for(;txt.match(/\{\{label:[^}]+\}(\{[^:]+:[^}]+\})*\}/);)txt=txt.replace(/\{\{label:([^}]+)\}((\{[^:]+:[^}]*\})*)\}/g,(x,y,z)=>{let v=!1;return z&&0<z.length&&(v={},z=z.replace(/\{([^:]+):([^}]*)\}/g,(a,b,c)=>(c=c.replace(/^label:(.+)/g,(m,n)=>glob.localize.label(n)),v[b]=c,""))),glob.localize.label(y,v)});for(;txt.match(/\{\{icon:[^}]+\}\}/);)txt=txt.replace(/\{\{icon:([^}]+)\}\}/g,function(x,y){return glob.localize.label(y,void 0,"icon")});return txt},labelizeAll:iterations=>{if(document.documentElement.querySelector('head meta[name="glob.localize.dontLabelize"]'))return glob.localize.newloadstarted=!1,glob.localize.loading=!1,glob.localize.loaded=!0;if(30<(iterations=iterations||0))return glob.localize.newloadstarted=!1,glob.localize.loading=!1,void(glob.localize.loaded=!0);if(iterations++,0<glob.localize.pending)return setTimeout(()=>{glob.localize.labelizeAll(iterations)},100);if("object"!=typeof glob.localize.main)return setTimeout(()=>{glob.localize.labelizeAll(iterations)},100);try{let body=document.getElementsByTagName("body")[0];if(void 0===body)return setTimeout(glob.localize.labelizeAll,10);glob.localize.loading=!0,body.innerHTML=glob.localize.labelize(body.innerHTML);let h=document.documentElement.querySelector("head"),wt=h.querySelector("title");if(wt)try{var ot=wt.innerHTML,nt=glob.localize.labelize(ot);ot!=nt&&(wt.innerHTML=nt,document.title=nt)}catch(e){console.debug(e)}let cs=h.querySelectorAll("style.ASloadingLanguages");0<cs.length&&cs.forEach(c=>{h.removeChild(c)}),glob.localize.newloadstarted=!1,glob.localize.loading=!1,glob.localize.loaded=!0}catch(e){return setTimeout(()=>{glob.localize.labelizeAll(iterations)},100)}},langloaded:!1,loaded:!1,loading:!1,loadjs:(uri,lang,skipNewLoad)=>!!document.documentElement.querySelector('head meta[name="glob.localize.dontLoad"]')||(glob.localize.pending++,glob.localize.loaded=!1,window.fetch(uri).then(response=>response.json()).then(data=>{"object"!=typeof glob.localize.main&&(glob.localize.main={}),Object.entries(data).forEach(([k,v])=>{"object"!=typeof glob.localize.main[k]&&(glob.localize.main[k]={}),"multi"==lang?v&&("object"==typeof v?Object.keys(v).forEach(kv=>{glob.localize.main[k][kv]=v[kv]}):"string"==typeof v&&(glob.localize.main[k][glob.localize.current]||(glob.localize.main[k][glob.localize.current]=v))):glob.localize.main[k][lang]=v}),glob.localize.pending--,0==glob.localize.pending&&(glob.localize.loaded=!0),glob.localize.langloaded=!0}).catch(e=>{glob.localize.pending--,0==glob.localize.pending&&(glob.localize.loaded=!0),glob.localize.langloaded=!0}),!!skipNewLoad||void glob.localize.newload()),main:!1,newload:()=>{if(!document.documentElement.querySelector('head meta[name="glob.localize.dontLoad"]')&&!document.documentElement.querySelector('head meta[name="glob.localize.dontLabelize"]')&&!glob.localize.newloadstarted){glob.localize.newloadstarted=!0;let c=document.createElement("style");return c.setAttribute("type","text/css"),c.setAttribute("class","ASloadingLanguages"),c.innerHTML="body { display: none !important; }",document.documentElement.querySelector("head").prepend(c),setTimeout(glob.localize.labelizeAll,100)}},newloadstarted:!1,page:showAll=>{let ns=document.querySelectorAll("body *[lang]");if(!(ns.length<1))if(showAll)ns.forEach(n=>{n.style.display=""});else{let re=new RegExp("^(..).*$"),ul="en",allLangs={};ns.forEach(n=>{allLangs[n.getAttribute("lang").replace(re,"$1").toLowerCase()]=!0}),glob.getCookie("forcelang")||window.navigator.languages.forEach(l=>{l=l.replace(re,"$1").toLowerCase();allLangs[l]&&(ul=String(l))}),ns.forEach(n=>{n.style.display=n.getAttribute("lang").replace(re,"$1").toLowerCase()==ul?"":"none"})}},pending:0,setLanguage:mainLang=>{"string"==typeof mainLang&&(window._lang=glob.localize.current=mainLang.toLowerCase());let d=new Date;d.setFullYear(d.getFullYear()+1),glob.setCookie("language",glob.localize.current,{expires:d,path:"/",sameSite:!0}),document.documentElement.querySelector('head meta[name="glob.localize.dontLoadAuto"]')},ready:()=>!!glob.localize.loaded,label:(key,values,lang)=>{lang=lang||(glob.localize.current||"en");let txt=glob.localize.main[key]||void 0;if(void 0===txt?txt=key:"object"==typeof txt&&(txt=txt[lang]||txt.en||key),"object"==typeof values)for(var[i,vi]of Object.entries(values)){let re;re=""==vi||void 0===vi?new RegExp("{{"+i+"}}","g"):new RegExp("{{"+i+"(\\|[^}]*)?}}","g"),txt=txt.replace(re,String(vi))}return txt=txt.replace(/\{\{[^|}]+\|([^}]*)\}\}/g,"$1"),txt}},glob.blockUI=(...args)=>{let parent=document.body,progress,message,mode=!0;if(args.forEach(a=>{"boolean"==typeof a?mode=a:a instanceof jQuery||a instanceof HTMLElement?parent=a:"number"==typeof a?progress=a:"string"==typeof a&&(message=a)}),mode=!!mode,!!$(".UiBlockerDiv",parent).length!=mode)if(mode){const $block=$('<div class="UiBlockerDiv"></div>');$block.append($('<div class="spinner"></div>').append($(_l("iconPrefs")))),$(parent).append($block),progress&&glob.blockUIAddProgress(progress),message&&glob.blockUIMessage(message)}else $(".UiBlockerDiv",parent).remove()},glob.blockUIAddProgress=(val,classname)=>{const $block=$(".UiBlockerDiv");val&&"number"==typeof val&&$block.length&&(void 0===classname&&(classname="success"),$(".progress",$block).length?($(".progress .progress-bar",$block).remove(),$(".progress",$block).append($(`<div class="progress-bar bg-${classname}" role="progressbar" style="width:0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="${val}"></div>`))):$block.append($(`<div class="progress"><div class="progress-bar bg-${classname}" role="progressbar" style="width:0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="${val}"></div></div>`)))},glob.blockUIProgress=val=>{const $pb=$(".UiBlockerDiv .progress .progress-bar");var max;$pb.length&&("number"!=typeof val&&(val=parseInt($pb.attr("aria-valuenow"))+1),max=parseInt($pb.attr("aria-valuemax")),$pb.attr("aria-valuenow",val).css("width",(100*val/max).toFixed(2)+"%"))},glob.blockUIMessage=m=>{const $block=$(".UiBlockerDiv");$block.length&&($(".message",$block).length?$(".message",$block).html(m):$block.append($('<div class="message"></div>').html(m)))},glob.unblockUI=parent=>{glob.blockUI(!1,parent)},glob.get=async(url="")=>{const response=await fetch(url,{method:"GET",cache:"reload",redirect:"follow"});switch(response.status){case 200:return response.json();case 204:return;case 401:return void(window.location.href="/");default:console.log(`Error fetching from "${url}"`,response)}},glob.smartSize=size=>{var i=Math.floor(Math.log(size)/Math.log(1024));return+(size/Math.pow(1024,i)).toFixed(2)+" "+["B","KB","MB","GB","TB"][i]},glob.select2={withkeys:(c,v)=>`${c}: ${v}`,addKeys:(data,withEmpty)=>(Array.isArray(data.results)&&(data.results.forEach(i=>{i.text=glob.select2.withkeys(i.id,i.text)}),withEmpty&&data.results.unshift({id:"",text:""})),data),selEvents:($sel,opts)=>{$sel.hasClass("glob-select2-events")||(opts.allowClear&&$sel.on("select2:clearing",e=>{e.preventDefault(),"search"==opts.selectType&&$sel.html(""),setTimeout(()=>{$sel.select2("close").val("").trigger("change")},10)}),opts.multiple&&$sel.on("select2:unselecting",e=>{var v=$sel.val();v&&1<v.length?setTimeout(()=>{$sel.select2("close")},10):(e.preventDefault(),"search"==opts.selectType&&$sel.html(""),setTimeout(()=>{$sel.select2("close").val("").trigger("change")},10))}),$sel.addClass("glob-select2-events"))},ls:(opts,node)=>{const so={dropdownPosition:glob.prop.select2_dopDownPosition,minimumResultsForSearch:-1},$sel=$(node);return(opts="string"==typeof opts?{uri:opts}:opts)&&"object"==typeof opts&&(opts.placeholder&&(so.placeholder=opts.placeholder),opts.allowClear&&(so.allowClear=opts.allowClear),opts.multiple&&(so.multiple=!0),opts.dropdownParent&&(so.dropdownParent=opts.dropdownParent),"string"==typeof opts.uri&&0<opts.uri.length&&(0!=opts.uri.indexOf("/")&&(opts.uri="/cl/"+opts.uri),opts.uri.match(/\/list\/?$/)||(opts.uri+="/list"),so.ajax={url:opts.uri,dataType:"json",delay:250},opts.keys?so.ajax.processResults=glob.select2.addKeys:opts.processResults&&(so.ajax.processResults=opts.processResults))),opts.selectType="ls",$sel.select2(so).addClass(`glob-select2 glob-select2-${opts.selectType}`),glob.select2.selEvents($sel,opts),!0},search:(opts,node)=>{const so={dropdownPosition:glob.prop.select2_dopDownPosition},$sel=$(node);return(opts="string"==typeof opts?{uri:opts}:opts)&&"object"==typeof opts&&(opts.placeholder&&(so.placeholder=opts.placeholder),opts.allowClear&&(so.allowClear=opts.allowClear),opts.multiple&&(so.multiple=!0),opts.dropdownParent&&(so.dropdownParent=opts.dropdownParent),"number"==typeof opts.min&&(so.minimumInputLength=opts.min),"string"==typeof opts.uri&&0<opts.uri.length&&(0!=opts.uri.indexOf("/")&&(opts.uri="/cl/"+opts.uri),opts.uri.match(/\/search\/?$/)||(opts.uri+="/search"),so.ajax={url:opts.uri,dataType:"json",delay:250},"function"==typeof opts.data&&(so.ajax.data=opts.data),opts.keys?so.ajax.processResults=glob.select2.addKeys:opts.processResults&&(so.ajax.processResults=opts.processResults))),opts.selectType="search",$sel.select2(so).addClass(`glob-select2 glob-select2-${opts.selectType}`),glob.select2.selEvents($sel,opts),!0},std:async(opts,node)=>{const so={dropdownPosition:glob.prop.select2_dopDownPosition},$sel=$(node),$selnode=$("option[selected]",$sel);$selnode.length&&($selnode.attr("value")||$selnode.html());if((opts="string"==typeof opts?{uri:opts}:opts)&&"object"==typeof opts&&(so.placeholder=opts.placeholder||_l("Choose"),opts.allowClear&&(so.allowClear=opts.allowClear),opts.multiple&&(so.multiple=!0),opts.dropdownParent&&(so.dropdownParent=opts.dropdownParent)),"string"==typeof opts.uri&&0<opts.uri.length){0!=opts.uri.indexOf("/")&&(opts.uri="/cl/"+opts.uri),opts.uri.match(/\/list\/?$/)||(opts.uri+="/list");let data=await glob.get(opts.uri);data&&data.results&&Array.isArray(data.results)&&("function"==typeof opts.processResults?data=opts.processResults(data):opts.keys&&(data=glob.select2.addKeys(data,opts.allowClear)),$sel.html(""),data.results.forEach(o=>{$sel.append(new Option(o.text,o.id))}))}return opts.selectType="std",$sel.select2(so).addClass(`glob-select2 glob-select2-${opts.selectType}`),glob.select2.selEvents($sel,opts),!0}},glob.menu=(ev,menu)=>{ev.preventDefault(),ev.stopPropagation();const zapMenus=()=>{document.querySelectorAll(".mabro-menu-wrap").forEach(el=>{$(el).fadeOut(10,()=>{$(el).remove()})}),$(".mabro-menu-highlight-element").removeClass("mabro-menu-highlight-element"),$(".mabro-menu-highlight-tent").remove(),$(".mabro-menu-active").removeClass("mabro-menu-active"),$(document.body).off("click contextmenu",zapMenus)};zapMenus();const testNode=n=>"string"==typeof n||"html"==typeof n||n instanceof Node||n instanceof NodeList||n instanceof jQuery;if((Array.isArray(menu)||testNode(menu))&&(menu={content:menu}),"object"==typeof menu){menu.type||(menu.type="context");const $cm=$('<div class="dropdown clearfix mabro-menu-wrap"></div>');if($cm.appendTo(document.body),testNode(menu.content))$cm.append(menu.content);else{if(!Array.isArray(menu.content))return $cm.remove(),void console.log("glob.menu error",e,menu);{const $ul=$(`<ul class="dropdown-menu mabro-menu-content" role="menu" aria-labelledby="dropdownMenu" style="max-width:${$(window).width()}px;"></ul>`),parseli=v=>{const $li=$("<li></li>");if("string"==typeof v)"-"==v?$li.html("<hr />"):$li.addClass("title").html(v);else{if("object"!=typeof v)return"";{let e,lab="";const ricon=v.ricon||"";ricon&&(lab+=`<i class="rIcon">${_l(ricon)}</i>`),v.icon&&(lab+=`<i class="${v.iconClass||"icon"}">${_l(v.icon)}</i>`),v.label&&(lab+=v.label),"string"==typeof v.title&&$li.attr("title",v.title);try{let eva=eval(v.action);"function"==typeof eva&&(v.action=eva)}catch(e){}if("function"==typeof v.action){let $a=$(`<a>${lab}</a>`);$a.on("contextmenu click",lev=>{lev.preventDefault(),lev.stopPropagation(),v.action.call(window,ev,lev),zapMenus()}),$a.addClass("clickable"),$li.append($a)}else if("string"==typeof v.action){let $a=$(`<a href="${v.action}">${lab}</a>`);v.download&&$a.attr("download",v.download),v.target&&$a.attr("target",v.target),$a.addClass("clickable"),$li.append($a)}else $li.addClass("disabled").append(`<a>${lab}</a>`)}}if(Array.isArray(v.content)&&v.content.length){const $sul=$("<ul></ul>");v.content.forEach(c=>{$sul.append(parseli(c))}),$li.addClass("subMenu"),$li.append($sul)}return $li};menu.content.forEach(v=>{$ul.append(parseli(v))}),$cm.append($ul)}}let left,top;const cmw=$cm.width(),cmh=$cm.height();if("button"==menu.type){menu.parent||(menu.parent=menu.highlight||"button");const $parent=$(ev.target).closest(menu.parent),pos=$parent.offset();left=menu.x||Math.floor(pos.left-2),top=menu.y||Math.floor(pos.top-2),top-$(window).scrollTop()+cmh>=$(window).height()&&(top=Math.ceil(pos.top+$parent.outerHeight()-cmh),$("ul.mabro-menu-content",$cm).append(Array.from($("ul.mabro-menu-content>li",$cm)).reverse())),left-$(window).scrollLeft()+cmw>=$(window).width()&&(left=Math.ceil(pos.left+$parent.outerWidth()-$cm.width()+1))}else if("menu"==menu.type){void 0===menu.sticky&&(menu.sticky=!0),menu.parent||(menu.parent=menu.highlight||"a");const $parent=$(ev.target).closest(menu.parent);$parent.addClass("mabro-menu-highlight-element");const pos=$parent.offset();left=menu.x||Math.floor(pos.left),top=menu.y||Math.floor(pos.top+$parent.outerHeight()-2),$cm.addClass("mabro-menu-menu"),top-$(window).scrollTop()+cmh>=$(window).height()&&(top=Math.ceil(pos.top-cmh+2),$("ul.mabro-menu-content",$cm).append(Array.from($("ul.mabro-menu-content>li",$cm)).reverse())),left-$(window).scrollLeft()+cmw>=$(window).width()&&(left=Math.ceil(pos.left+$parent.outerWidth()-cmw+1)),$parent.addClass("mabro-menu-active")}else left=menu.x||ev.pageX-20,top=menu.y||ev.pageY-20,top-$(window).scrollTop()+cmh>=$(window).height()&&(top-=cmh-40,$("ul.mabro-menu-content",$cm).append(Array.from($("ul.mabro-menu-content>li",$cm)).reverse())),left-$(window).scrollLeft()+cmw>=$(window).width()&&(left-=cmw-40);if(left<0&&(left=0),top<0&&(top=0),!menu.parent){let hl=!1;if(menu.highlight?hl=$(ev.target).closest(menu.highlight):void 0===menu.highlight&&(hl=$(ev.target)),hl){const os=hl.offset();$(`<div class="mabro-menu-highlight-tent" style="top:${os.top}px;left:${os.left}px;width:${hl.width()}px;height:${hl.height()}px;"> </div>`).appendTo(document.body),hl.addClass("mabro-menu-highlight-element")}}$(document.body).on("click contextmenu",zapMenus),$cm.css({transition:`all ${menu.duration||100}ms`,transform:`translateY(${parseInt(ev.pageY-top-cmh/2)}px) scaleY(0)`,left:`${left}px`,top:`${top}px`,display:"block"});const rmtrans=e=>{menu.sticky||$cm.on("mouseleave",zapMenus),$(e.target).off("transitionend",rmtrans).css({transition:"unset",transform:"unset"})};$cm.on("transitionend",rmtrans),window.setTimeout(()=>{$cm.css({transform:"translateY(0) scaleY(1)"})},0)}},glob.localize.init(),window._l=glob.label=glob.localize.label,window._icon=x=>glob.localize.label(x,void 0,"icon"),$(()=>{if(!glob.prop.MBobjStarted){const s=document.documentElement.getElementsByTagName("head")[0].querySelector('script[tag="mabro-starter"]');if(s){const src=s.getAttribute("src");var is_prod=!!src.includes("://");const opts={mabro_base:src.replace(/js\/[^\/]+$/,""),mjs_suffix:is_prod?"min.mjs":"mjs",js_suffix:is_prod?"min.js":"js"};opts[is_prod?"is_prod":"is_dev"]=!0,import(`${opts.mabro_base}js/mabro.${opts.mjs_suffix}`).then(mbmodule=>{mbmodule.default(opts).then(mbclass=>{glob.prop.MBobjStarted=!0,new mbclass(opts.mabro_base).init()})})}}});